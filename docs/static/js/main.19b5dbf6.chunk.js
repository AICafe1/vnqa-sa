(this.webpackJsonpvnqa=this.webpackJsonpvnqa||[]).push([[0],{19:function(e,t,n){e.exports=n(53)},24:function(e,t,n){n(25),n(26)},25:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),i=window.dfd,l=i.Series,o=i.DataFrame,s=function(){function e(t,n){Object(a.a)(this,e),this.index=t.index,this.series=[];for(var r=0,i=t.index.length;r<i;)++r<n?this.series.push(NaN):this.series.push(t.iloc(["".concat(r-n,":").concat(r)]))}return Object(r.a)(e,[{key:"apply",value:function(e){return new l(this.series.map((function(t){return t&&e(t)})),{index:this.index})}}]),e}();l.prototype.rolling=function(e){return new s(this,e)};var c=function(){function e(t,n){Object(a.a)(this,e),this.index=t.index,this.columns=t.columns,this.dtypes=t.dtypes,this.df=[];for(var r=0,i=t.index.length;r<i;)++r<n?this.df.push(NaN):this.df.push(t.iloc({rows:["".concat(r-n,":").concat(r)]}))}return Object(r.a)(e,[{key:"apply",value:function(e){var t=this.columns.map((function(){return NaN}));return new o(this.df.map((function(n){return n?e(n):t})),{index:this.index,columns:this.columns,dtypes:this.dtypes})}}]),e}();o.prototype.rolling=function(e){return new c(this,e)}},26:function(e,t){window.dfd.Series.prototype.dropnall=function(e){for(var t=this.values,n=this.index,a=[],r=[],i=0,l=t.length;i<l;i++){var o=t[i];isNaN(o)||null===o||void 0===o||(a.push(o),r.push(n[i]))}if(e.inplace)return this.$setValues(a,!1),this.$setIndex(r),this;var s=this.copy();return s.$setValues(a,!1),s.$setIndex(r),s}},53:function(e,t,n){"use strict";n.r(t);var a,r,i,l=n(1),o=n(2),s=n(4),c=n(3),u=n(5),d=n(0),p=n.n(d),m=n(8),h=n.n(m),v=(n(24),n(9)),f=window.wp;function g(e){return e&&"aicafe_one_logged_out"===e.code?window.location.reload():e}if(window.wp=void 0,f.role||(window.location.href=f.url||"https://aicafe.one/vnqa",exit()),f.hasOwnProperty("vnqa"))try{a=f.vnqa?JSON.parse(f.vnqa):{},delete f.vnqa}catch(fe){a={}}var y={arrayMerge:function(e,t){return t}};function b(){return a?new Promise((function(e){return e(a)})):(r||(r=(e="aicafe/v1/app/vnqa",fetch("".concat(f.api).concat(e).concat(-1===e.indexOf("?")?"?":"&","_wpnonce=").concat(f.nonce)).then((function(e){return e.json()})).then(g)).then((function(e){return a=Array.isArray(e)?{}:e})).catch((function(){return a={}}))),r);var e}function w(e){return a=window.deepmerge(a,e,y),i&&clearTimeout(i),i=setTimeout((function(){return e="aicafe/v1/app/vnqa",t=a,fetch("".concat(f.api).concat(e).concat(-1===e.indexOf("?")?"?":"&","_wpnonce=").concat(f.nonce),{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then(g);var e,t}),9e3),a}var E=!document.getElementById("df"),x=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.lazy&&clearTimeout(this.lazy)}},{key:"setStateLazy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;this.lazy&&clearTimeout(this.lazy),this.lazyState=this.lazyState?Object.assign(this.lazyState,e):e,this.lazy=setTimeout((function(){t.setState(t.lazyState),t.lazyState=!1}),n)}},{key:"getSettings",value:function(e,t){E&&b().then((function(n){return t(e?n[e]:n)}))}},{key:"getSettingsSync",value:function(e){return E&&(e?a&&a[e]:a)}},{key:"saveSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E&&w(e)}}]),t}(p.a.Component),j=window.dfd.DataFrame,k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={ticker:"",window:20},n.getSettingsSync()?(n.state.ticker=n.getSettingsSync(n.getKey())||n.state.ticker,n.state.window=n.getSettingsSync("window")||n.state.window):n.getSettings(!1,(function(e){if(n.props.df instanceof j){var t=e[n.getKey()];t&&t!==n.state.ticker&&n.setState({ticker:t})}e.window&&e.window!==n.state.window&&n.setState({window:e.window})})),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getKey",value:function(){return this.props.df.hasOwnProperty("VNINDEX")?"idx":"ticker"}},{key:"changeTicker",value:function(e){this.state.ticker!==e&&(this.saveSettings(Object(v.a)({},this.getKey(),e)),this.setState({ticker:e}))}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({window:e}),this.setState({window:e})}}]),t}(x),O=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.df,a=e.columns;a||(a=n.columns);for(var r=[{x:n[a[0]].index,y:n[a[0]].values,name:a[0]}],i=[["xy"]],l=1;l<a.length;l++)r.push({x:n[a[l]].index,y:n[a[l]].values,name:a[l],xaxis:"x",yaxis:"y".concat(l+1)}),i.push(["xy".concat(l+1)]);window.Plotly.newPlot(t,r,{xaxis:{showspikes:!0,spikemode:"toaxis+across+marker",spikesnap:"cursor"},yaxis:{type:"log"},grid:{rows:a.length,columns:1,subplots:i},margin:{l:40,r:8,b:32,t:40,pad:0},showlegend:!1})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement("div",{id:this.props.id})}}]),t}(p.a.Component),N=n(10),S=n(18),C=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=Object(N.a)({},this.props);return e.options=e.options.map((function(t){return e.value===t?(e.value={value:t,label:t},e.value):{value:t,label:t}})),p.a.createElement(S.a,e)}}]),t}(p.a.Component),M=window.dfd.DataFrame,D=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"volatility",value:function(e){var t=this.props.df,n=e.ticker,a=e.window;t instanceof M&&(n&&t.hasOwnProperty(n)||(n=t.columns[0],e.ticker=n),t=t[n]),t.dropnall({inplace:!0});var r=t.apply(Math.log);(t=new M(Object(v.a)({},t.columns[0],t.values),{index:t.index})).addColumn({values:r.sub([NaN].concat(r.values.slice(0,-1))),column:"returns",inplace:!0});var i=(new Date(t.index[t.index.length-1])-new Date(t.index[0]))/315576e5,l=Math.sqrt((t.index.length-1)/i);return t.addColumn({values:t.returns.rolling(a).apply((function(e){return e.std()*l})),column:"volatility",inplace:!0}),e.df=t,e}},{key:"render",value:function(){var e=this,t=this.volatility(this.state);return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng",this.props.df instanceof M&&p.a.createElement(p.a.Fragment,null,"\xa0c\u1ee7a",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns})),"\xa0trong",p.a.createElement("input",{className:"d-inline-flex ms-2 form-control",style:{width:"70px"},type:"number",value:t.window,onChange:function(t){return e.changeWindow(t)}}),"\xa0ng\xe0y"),p.a.createElement("div",{className:"card-body"},t.df&&p.a.createElement(O,{id:this.props.id,df:t.df})))}}]),t}(k),P=window,F=P.jStat,T=P.Plotly,q=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.x,a=e.y,r=F.min(n),i=F.max(n),l=F(this.model?this.model.coef:[0,1]),o=[{x:n,y:a,mode:"markers",type:"scatter"},{x:[r,i],y:[l.dot([1,r]),l.dot([1,i])],mode:"lines"}];T.newPlot(t,o,{margin:{l:40,r:8,b:32,t:40,pad:0},showlegend:!1})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return this.model=F.models.ols(this.props.y,this.props.x.map((function(e){return[1,e]}))),p.a.createElement(p.a.Fragment,null,p.a.createElement("h5",{className:"text-center my-3"},this.props.title),p.a.createElement("table",{className:"table table-borderless table-striped table-hover"},p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"coef"),p.a.createElement("td",null,this.model.coef.join(", "))),p.a.createElement("tr",null,p.a.createElement("td",null,"t test P-value"),p.a.createElement("td",null,this.model.t.p.join(", "))),p.a.createElement("tr",null,p.a.createElement("td",null,"f test P-value"),p.a.createElement("td",null,this.model.f.pvalue)),p.a.createElement("tr",null,p.a.createElement("td",null,"R2"),p.a.createElement("td",null,this.model.R2)))),p.a.createElement("div",{id:this.props.id}))}}]),t}(p.a.Component),z=window.dfd.DataFrame,R=window.jStat,I=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"volatility",value:function(e){var t=this.props.df,n=e.ticker,a=e.window;t instanceof z&&(n&&t.hasOwnProperty(n)||(n=t.columns[0],e.ticker=n),t=t[n]),t.dropnall({inplace:!0});for(var r=t.apply(Math.log),i=r.iloc(["1:"]).sub(r.values.slice(0,-1)).values,l=[],o=[],s=0,c=i.length;s<c;s+=a){var u=i.slice(s,s+a);l.push(R.mean(u)),o.push(R.stdev(u))}return e.retx=l.slice(0,-1),e.rety=l.slice(1),e.volx=o.slice(0,-1),e.voly=o.slice(1),e}},{key:"render",value:function(){var e=this,t=this.volatility(this.state);return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"M\xf4 h\xecnh tuy\u1ebfn t\xednh d\u1ef1 b\xe1o",this.props.df instanceof z&&p.a.createElement(p.a.Fragment,null,"\xa0cho",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns})),"\xa0trong",p.a.createElement("input",{className:"d-inline-flex ms-2 form-control",style:{width:"70px"},type:"number",value:t.window,onChange:function(t){return e.changeWindow(t)}}),"\xa0ng\xe0y"),p.a.createElement("div",{className:"card-body row"},p.a.createElement("div",{className:"col-md-6"},t.retx&&p.a.createElement(q,{id:this.props.id+"Ret",x:t.retx,y:t.rety,title:"D\u1ef1 b\xe1o l\u1ee3i nhu\u1eadn"})),p.a.createElement("div",{className:"col-md-6"},t.volx&&p.a.createElement(q,{id:this.props.id+"Vol",x:t.volx,y:t.voly,title:"D\u1ef1 b\xe1o \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng"}))))}}]),t}(k),U=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id;e.sf.plot(t).hist({layout:Object(N.a)({margin:{l:40,r:8,b:32,t:100,pad:0}},this.props)})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement("div",{id:this.props.id})}}]),t}(p.a.Component),A=window,K=A.jStat,B=A.PortfolioAnalytics,W=A.Plotly,$=window.dfd.DataFrame;var L=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.df;window.df=n,W.newPlot(t+"dd",[{x:n.index,y:B.drawdownFunction(n.values).map((function(e){return-e})),fill:"tozeroy",line:{color:"#ff7f0e"}}],{margin:{l:40,r:8,b:32,t:40,pad:0}})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"returns",value:function(e){var t=this.props.df,n=e.ticker||this.state.ticker;t instanceof $&&(n&&t.hasOwnProperty(n)||(n=t.columns[0],e.ticker=n),t=t[n]),t.dropnall({inplace:!0});var a=t.apply(Math.log);return e.df=t,e.returns=a.iloc(["1:"]).sub(a.values.slice(0,-1)),e}},{key:"render",value:function(){var e=this,t=this.returns(this.state),n=t.returns,a=t.df,r=t.ticker,i=(new Date(a.index[a.index.length-1])-new Date(a.index[0]))/315576e5,l=(a.index.length-1)/i,o=B.topDrawdowns(a.values,1)[0],s=function(e){for(var t,n=0,a=0,r=-1/0,i=0,l=e.length;i<l;i++){var o=e[i];o<r?t++:(t>n&&(n=t,a=i),r=o,t=0)}return t>n&&(n=t,a=e.length-1),{maxD3:n,from:a-n-1,to:a}}(a.values);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"card mb-3"},p.a.createElement("div",{className:"card-header"},"L\u1ee3i nhu\u1eadn",this.props.df instanceof $&&p.a.createElement(p.a.Fragment,null,"\xa0c\u1ee7a",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:r||this.props.df.columns[0],options:this.props.df.columns}))),p.a.createElement("div",{className:"card-body row"},p.a.createElement("div",{className:"col-md-6 mt-4"},p.a.createElement("table",{className:"table table-borderless table-striped table-hover"},p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"T\u1eeb ng\xe0y"),p.a.createElement("td",null,a.index[0])),p.a.createElement("tr",null,p.a.createElement("td",null,"\u0110\u1ebfn ng\xe0y"),p.a.createElement("td",null,a.index[a.index.length-1])),p.a.createElement("tr",null,p.a.createElement("td",null,"T\u1ef7 l\u1ec7 t\u0103ng tr\u01b0\u1edfng h\xe0ng n\u0103m (CAGR)"),p.a.createElement("td",null,(100*Math.expm1(Math.log(a.values[a.values.length-1]/a.values[0])/i)).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"L\u1ee3i nhu\u1eadn trung b\xecnh n\u0103m"),p.a.createElement("td",null,(n.mean()*l*100).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"Bi\u1ebfn \u0111\u1ed9ng trung b\xecnh n\u0103m"),p.a.createElement("td",null,(n.std()*Math.sqrt(l)*100).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"Sharpe Ratio"),p.a.createElement("td",null,(n.mean()/n.std()*Math.sqrt(l)).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"Gain to Pain Ratio"),p.a.createElement("td",null,B.gainToPainRatio(a.values).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"Max Drawdown (",a.index[o[1]]," \u2192 ",a.index[o[2]],")"),p.a.createElement("td",null,o[0].toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"MDDD (",a.index[s.from]," \u2192 ",a.index[s.to],")"),p.a.createElement("td",null,s.maxD3," bars (",Math.round((new Date(a.index[s.to])-new Date(a.index[s.from]))/864e5)," ng\xe0y)")),p.a.createElement("tr",null,p.a.createElement("td",null,"\u0110\u1ed9 l\u1ec7ch (Skew)"),p.a.createElement("td",null,K.skewness(n.values).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"\u0110\u1ed9 nh\u1ecdn (Kurtosis)"),p.a.createElement("td",null,K.kurtosis(n.values).toFixed(2))),p.a.createElement("tr",null,p.a.createElement("td",null,"Value at Risk / Bar (95%)"),p.a.createElement("td",null,(100*K.percentile(n.values,.05)).toFixed(2),"%")),p.a.createElement("tr",null,p.a.createElement("td",null,"Ulcer Index"),p.a.createElement("td",null,B.ulcerIndex(a.values).toFixed(3)))))),p.a.createElement("div",{className:"col-md-6"},p.a.createElement(U,{id:this.props.id,sf:n,title:"Ph\xe2n b\u1ed1 l\u1ee3i nhu\u1eadn"})))),p.a.createElement("div",{className:"card mb-3"},p.a.createElement("div",{className:"card-header"},"Drawdown"),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{id:this.props.id+"dd"}))))}}]),t}(k),V=n(16),G=n.n(V),_=(n(52),n(12)),H=n.n(_),J=n(17),X=n.n(J),Q=n(6);function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(r){function i(){return Object(l.a)(this,i),Object(s.a)(this,Object(c.a)(i).apply(this,arguments))}return Object(u.a)(i,r),Object(o.a)(i,[{key:"render",value:function(){var r=new Q.PivotData(this.props),i=r.getRowKeys(),l=r.getColKeys(),o=a?l:i;0===o.length&&o.push([]);var s=a?i:l;0===s.length&&s.push([]);var c=this.props.aggregatorName,u=this.props.aggregators[c]([])().numInputs||0;0!==u&&(c+=" of ".concat(this.props.vals.slice(0,u).join(", ")));var d=o.map((function(e){var n=[],i=[],l=!0,o=!1,u=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value,h=parseFloat(r.getAggregator(a?m:e,a?e:m).value());n.push(isFinite(h)?h:null),i.push(m.join("-")||" ")}}catch(f){o=!0,u=f}finally{try{l||null==p.return||p.return()}finally{if(o)throw u}}var v={name:e.join("-")||c};return"pie"===t.type?(v.values=n,v.labels=i.length>1?i:[c]):(v.x=a?n:i,v.y=a?i:n),Object.assign(v,t)})),m=c,h=a?this.props.rows.join("-"):this.props.cols.join("-"),v=a?this.props.cols.join("-"):this.props.rows.join("-");""!==h&&(m+=" vs ".concat(h)),""!==v&&(m+=" by ".concat(v));var f={title:m,hovermode:"closest",width:window.innerWidth*(window.innerWidth<768?.7:.6)-96,height:.6*window.innerHeight};if("pie"===t.type){var g=Math.ceil(Math.sqrt(d.length)),y=Math.ceil(d.length/g);f.grid={columns:g,rows:y},d.forEach((function(e,t){e.domain={row:Math.floor(t/g),column:t-g*Math.floor(t/g)},d.length>1&&(e.title=e.name)})),1===d[0].labels.length&&(f.showlegend=!1)}else f.xaxis={title:a?c:null,automargin:!0},f.yaxis={title:a?null:c,automargin:!0};return p.a.createElement(e,{data:d,layout:Object.assign(f,n,this.props.plotlyOptions),config:this.props.plotlyConfig,onUpdate:this.props.onRendererUpdate})}}]),i}(p.a.PureComponent);return r.defaultProps=Object.assign({},Q.PivotData.defaultProps,{plotlyOptions:{},plotlyConfig:{}}),r}function Z(e){var t=function(t){function n(){return Object(l.a)(this,n),Object(s.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(u.a)(n,t),Object(o.a)(n,[{key:"render",value:function(){var t=new Q.PivotData(this.props),n=t.getRowKeys(),a=t.getColKeys();0===n.length&&n.push([]),0===a.length&&a.push([]);var r={x:[],y:[],text:[],type:"scatter",mode:"markers"};n.forEach((function(e){a.forEach((function(n){var a=t.getAggregator(e,n).value();null!==a&&(r.x.push(n.join("-")),r.y.push(e.join("-")),r.text.push(a))}))}));var i={title:this.props.rows.join("-")+" vs "+this.props.cols.join("-"),hovermode:"closest",xaxis:{title:this.props.cols.join("-"),automargin:!0},yaxis:{title:this.props.rows.join("-"),automargin:!0},width:window.innerWidth*(window.innerWidth<768?.7:.6)-96,height:.6*window.innerHeight};return p.a.createElement(e,{data:[r],layout:Object.assign(i,this.props.plotlyOptions),config:this.props.plotlyConfig,onUpdate:this.props.onRendererUpdate})}}]),n}(p.a.PureComponent);return t.defaultProps=Object.assign({},Q.PivotData.defaultProps,{plotlyOptions:{},plotlyConfig:{}}),t}var ee=X()(window.Plotly);function te(e){var t=Math.min.apply(Math,e),n=Math.max.apply(Math,e);return function(e){if(e>0){var a=255-Math.round(255*e/n);return{backgroundColor:"rgb("+a+",255,"+a+")"}}if(e<0){var r=255-Math.round(255*e/t);return{backgroundColor:"rgb(255,"+r+","+r+")"}}return{}}}var ne,ae=Object.assign({},H.a,{"Grouped Column Chart":Y(ne=ee,{type:"bar"},{barmode:"group"}),"Stacked Column Chart":Y(ne,{type:"bar"},{barmode:"relative"}),"Grouped Bar Chart":Y(ne,{type:"bar",orientation:"h"},{barmode:"group"},!0),"Stacked Bar Chart":Y(ne,{type:"bar",orientation:"h"},{barmode:"relative"},!0),"Line Chart":Y(ne),"Dot Chart":Y(ne,{mode:"markers"},{},!0),"Area Chart":Y(ne,{stackgroup:1}),"Scatter Chart":Z(ne),"Multiple Pie Chart":Y(ne,{type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)});function re(e){return isNaN(e)||!isFinite(e)?"":Math.abs(e)>=1e8?e.toExponential(2):(e<0?"-":"")+Math.floor(Math.abs(e.toFixed(2))).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+(Math.abs(e)%1).toFixed(2).replace(/0*$/,"").replace(/\.$/,"").substr(1)}function ie(e){return re(Math.exp(e))}function le(e){return re(100*Math.expm1(e))}Q.aggregators["Exp Sum"]=Q.aggregatorTemplates.sum(ie),Q.aggregators["Exp Avg"]=Q.aggregatorTemplates.average(ie),Q.aggregators["Exp Stdev"]=Q.aggregatorTemplates.stdev(1,ie),Q.aggregators["Exp % Sum"]=Q.aggregatorTemplates.sum(le),Q.aggregators["Exp % Avg"]=Q.aggregatorTemplates.average(le),Q.aggregators["Exp % Stdev"]=Q.aggregatorTemplates.stdev(1,le);var oe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement(G.a,Object.assign({onChange:function(t){return e.setState(t)},renderers:ae,tableColorScaleGenerator:te},this.props,this.state,{data:this.props.data}))}}]),t}(p.a.Component),se=window.dfd,ce=se.DataFrame,ue=se.Series,de=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"seasonal",value:function(e){var t=this.props.df,n=e.ticker;t instanceof ce&&(n&&t.hasOwnProperty(n)||(n=t.columns[0],e.ticker=n),t=t[n]),t.dropnall({inplace:!0});var a=t.apply(Math.log);t=new ce({returns:a.iloc(["1:"]).sub(a.values.slice(0,-1)).values},{index:t.index.slice(1)});var r=new ue(t.index).dt;return t.addColumn({values:r.year(),column:"year",inplace:!0}),t.addColumn({values:r.month().add(1),column:"month",inplace:!0}),t.addColumn({values:r.day().add(1),column:"day of week",inplace:!0}),t.addColumn({values:r.monthday(),column:"day of month",inplace:!0}),e.data=[t.columns].concat(t.values),e}},{key:"render",value:function(){var e=this,t=this.seasonal(this.state);return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header",style:{zIndex:2}},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn",this.props.df instanceof ce&&p.a.createElement(p.a.Fragment,null,"\xa0c\u1ee7a",p.a.createElement(C,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns}))),t.data&&p.a.createElement("div",{className:"card-body"},p.a.createElement(oe,{data:t.data,aggregatorName:"Exp % Sum",vals:["returns"],rows:["year"],cols:["month"],rendererName:"Table Heatmap"})))}}]),t}(k),pe=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.ep;n.plot(t).line({x:n.index,layout:{margin:{l:40,r:8,b:32,t:40,pad:0}}})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-header"},"T\u1ef7 tr\u1ecdng ch\u1ee9ng kho\xe1n"),p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{id:this.props.id})))}}]),t}(p.a.Component),me=window.dfd.Series;function he(e){return e.replace(/(^"|"$)/g,"")}var ve=function(e){function t(e){var n;Object(l.a)(this,t),n=Object(s.a)(this,Object(c.a)(t).call(this,e));var a=document.getElementById("df").innerHTML.trim();"%(csv)s"===a&&(a="date,close,expose\n2022-10-03,1,0\n2022-10-04,3,70006\n2022-10-05,2,70700\n2022-10-06,4,71143\n2022-10-07,5,71239");var r=[],i=[],o=[];return a.split(/\r?\n/).slice(1).forEach((function(e){if(e){var t=e.split(",").map(he);r.push(t[0]),i.push(+t[1]),o.push(t[2]/1e5)}})),n.state={df:new me(i,{index:r,config:{lowMemoryMode:!0}}),ep:new me(o,{index:r,config:{lowMemoryMode:!0}})},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this,n=this.state,a=n.tab,r=n.df,i=n.ep;return"risk"===a?e=p.a.createElement(L,{id:"risk",df:r}):"pred"===a?e=p.a.createElement(I,{id:"stocksPred",df:r}):"ep"===a?e=p.a.createElement(pe,{id:"stocksEp",ep:i}):"ssn"===a?e=p.a.createElement(de,{id:"stocksSsn",df:r}):(a="vola",e=p.a.createElement(D,{id:"stocksVola",df:r})),p.a.createElement(p.a.Fragment,null,p.a.createElement("ul",{className:"nav nav-tabs my-2"},p.a.createElement("li",{className:"nav-item",onClick:function(){return"vola"===a||t.setState({tab:"vola"})}},p.a.createElement("button",{className:"vola"===a?"nav-link active":"nav-link"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),p.a.createElement("li",{className:"nav-item",onClick:function(){return"risk"===a||t.setState({tab:"risk"})}},p.a.createElement("button",{className:"risk"===a?"nav-link active":"nav-link"},"L\u1ee3i nhu\u1eadn")),r.$data.length>20&&p.a.createElement("li",{className:"nav-item",onClick:function(){return"pred"===a||t.setState({tab:"pred"})}},p.a.createElement("button",{className:"pred"===a?"nav-link active":"nav-link"},"D\u1ef1 b\xe1o")),p.a.createElement("li",{className:"nav-item",onClick:function(){return"ep"===a||t.setState({tab:"ep"})}},p.a.createElement("button",{className:"ep"===a?"nav-link active":"nav-link"},"T\u1ef7 tr\u1ecdng")),p.a.createElement("li",{className:"nav-item",onClick:function(){return"ssn"===a||t.setState({tab:"ssn"})}},p.a.createElement("button",{className:"ssn"===a?"nav-link active":"nav-link"},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn"))),e)}}]),t}(d.Component);h.a.render(p.a.createElement(ve,null),document.getElementById("root"))}},[[19,1,2]]]);